# 服务注册到nacos

## 新建微服务模块 cloud_auth

1. 新建一个 spring boot maven 项目，最新版本idea最低只能使用spring boot 4.7 版本，可以在创建之后修改spring boot 版本为 3.3.2。
这是由于 nacos 支持Spring Boot 2.x 和 3.x 版本。
2. 添加依赖
```xml
 <!--    nacos 服务发现    -->
<dependency>
    <groupId>com.alibaba.cloud</groupId>
    <artifactId>spring-cloud-starter-alibaba-nacos-discovery</artifactId>
    <version>2023.0.3.2</version>
</dependency>
```
3. 配置文件中添加配置项
```properties
spring.application.name=cloud_auth

server.port=8080

spring.cloud.nacos.discovery.server-addr=192.168.1.7:8848
## nacos 开启了登录鉴权，需要添加用户名密码
spring.cloud.nacos.discovery.username=nacos
spring.cloud.nacos.discovery.password=nacos
```

4. 使用 `@EnableDiscoveryClient` 注解开启服务注册发现功能
```java
package top.wmd;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.cloud.client.discovery.EnableDiscoveryClient;

@EnableDiscoveryClient
@SpringBootApplication
public class CloudAuthApplication {

    public static void main(String[] args) {
        SpringApplication.run(CloudAuthApplication.class, args);
    }

}
```

5. 启动服务，访问 http://192.168.1.7:8848/nacos/#/serviceManagement 可以看到服务注册成功。

![img1.png](https://img.wmd001.top/blog/2025/11/08/20251108155112772.png)

**服务权重**：服务列表中查看服务详情， 可以看到服务的默认权重是1